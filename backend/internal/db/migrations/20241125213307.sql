-- Create "orders" table
CREATE TABLE "orders" ("order_id" bigserial NOT NULL, "status" character varying(10) NOT NULL, "total_price" numeric(10,2) NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "updated_at" timestamptz NOT NULL DEFAULT now(), "user_id" uuid NOT NULL, PRIMARY KEY ("order_id"), CONSTRAINT "fk_user" FOREIGN KEY ("user_id") REFERENCES "users" ("user_id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create "order_items" table
CREATE TABLE "order_items" ("order_item_id" bigserial NOT NULL, "quantity" bigint NOT NULL, "price" numeric(10,2) NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "updated_at" timestamptz NOT NULL DEFAULT now(), "product_variation_id" bigint NOT NULL, "order_id" bigint NOT NULL, PRIMARY KEY ("order_item_id"), CONSTRAINT "fk_order" FOREIGN KEY ("order_id") REFERENCES "orders" ("order_id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "fk_product_variation" FOREIGN KEY ("product_variation_id") REFERENCES "product_variations" ("product_variation_id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create "shopping_cart" table
CREATE TABLE "shopping_cart" ("shopping_cart_id" bigserial NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "updated_at" timestamptz NOT NULL DEFAULT now(), "user_id" uuid NOT NULL, PRIMARY KEY ("shopping_cart_id"), CONSTRAINT "fk_user" FOREIGN KEY ("user_id") REFERENCES "users" ("user_id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create "shopping_cart_items" table
CREATE TABLE "shopping_cart_items" ("shopping_cart_item_id" bigserial NOT NULL, "quantity" bigint NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "updated_at" timestamptz NOT NULL DEFAULT now(), "product_variation_id" bigint NOT NULL, "shopping_cart_id" bigint NOT NULL, PRIMARY KEY ("shopping_cart_item_id"), CONSTRAINT "fk_product_variation" FOREIGN KEY ("product_variation_id") REFERENCES "product_variations" ("product_variation_id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "fk_shopping_cart" FOREIGN KEY ("shopping_cart_id") REFERENCES "shopping_cart" ("shopping_cart_id") ON UPDATE NO ACTION ON DELETE CASCADE);
