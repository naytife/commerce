import {
  noop
} from "./chunk-4ZSF5TJX.js";
import {
  BROWSER
} from "./chunk-IP2U24VQ.js";

// node_modules/svelte/src/internal/client/timing.js
var request_animation_frame = BROWSER ? requestAnimationFrame : noop;
var now = BROWSER ? () => performance.now() : () => Date.now();
var raf = {
  tick: (
    /** @param {any} _ */
    (_) => request_animation_frame(_)
  ),
  now: () => now(),
  tasks: /* @__PURE__ */ new Set()
};

// node_modules/svelte/src/internal/client/loop.js
function run_tasks(now2) {
  raf.tasks.forEach((task) => {
    if (!task.c(now2)) {
      raf.tasks.delete(task);
      task.f();
    }
  });
  if (raf.tasks.size !== 0) {
    raf.tick(run_tasks);
  }
}
function loop(callback) {
  let task;
  if (raf.tasks.size === 0) {
    raf.tick(run_tasks);
  }
  return {
    promise: new Promise((fulfill) => {
      raf.tasks.add(task = { c: callback, f: fulfill });
    }),
    abort() {
      raf.tasks.delete(task);
    }
  };
}

export {
  raf,
  loop
};
//# sourceMappingURL=chunk-SUONTV4J.js.map
